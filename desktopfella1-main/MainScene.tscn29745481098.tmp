[gd_scene load_steps=76 format=3 uid="uid://s0yf0iub81wp"]

[ext_resource type="Texture2D" uid="uid://b3127h2nnntcw" path="res://Desktop Buddie Sprites/1 white png.png" id="1_a814b"]
[ext_resource type="Script" uid="uid://mcvsgxk8miuo" path="res://BackgroundDrift.gd" id="1_gdhla"]
[ext_resource type="Script" uid="uid://cy2ommtjoqmpr" path="res://Scenes/OpenLilFellaWindow.gd" id="1_x4av3"]
[ext_resource type="Texture2D" uid="uid://dtu6opkcgqb3m" path="res://Desktop Buddie Sprites/Desktopfella BG.png" id="2_g1j4k"]
[ext_resource type="Script" uid="uid://dr2smwhoy705s" path="res://LabelBobbing.gd" id="3_h8rcm"]
[ext_resource type="Texture2D" uid="uid://cssqqotld08fq" path="res://Desktop Buddie Sprites/temparrow2.png" id="4_rf2cd"]
[ext_resource type="Texture2D" uid="uid://40pn6xhsvx5y" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2025-06-13 085154.png" id="4_uxrcv"]
[ext_resource type="Texture2D" uid="uid://dxqn2d7w6ci0k" path="res://Desktop Buddie Sprites/CoverAnimations/Femaile icon 1.png" id="5_mf6xi"]
[ext_resource type="Script" uid="uid://dl5l74hri4xic" path="res://change page.gd" id="5_rf2cd"]
[ext_resource type="Texture2D" uid="uid://cbho8786mbisu" path="res://Desktop Buddie Sprites/CoverAnimations/Male icon 1.png" id="6_0p4dw"]
[ext_resource type="Texture2D" uid="uid://c3jyod4myb3wv" path="res://Desktop Buddie Sprites/CoverAnimations/Femaile icon 2.png" id="6_bqt71"]
[ext_resource type="Texture2D" uid="uid://dtcmci71et07m" path="res://Desktop Buddie Sprites/CoverAnimations/Male icon 2.png" id="7_78ikg"]
[ext_resource type="Script" uid="uid://b04nk5klnoxh4" path="res://Scenes/lil_guye.gd" id="7_g1j4k"]
[ext_resource type="Texture2D" uid="uid://dmwy7jweaeupr" path="res://Desktop Buddie Sprites/CoverAnimations/Femaile icon 3.png" id="7_sdsqc"]
[ext_resource type="Script" uid="uid://coxdutk2021x3" path="res://ReactToFilePickUp.gd" id="8_4f1ln"]
[ext_resource type="Texture2D" uid="uid://sker0jc0hnm" path="res://Desktop Buddie Sprites/CoverAnimations/Femaile icon 4.png" id="8_at0my"]
[ext_resource type="Texture2D" uid="uid://bqu4tn1hmtrtn" path="res://Desktop Buddie Sprites/CoverAnimations/Male icon 3.png" id="8_nlxy1"]
[ext_resource type="Texture2D" uid="uid://boqqwovgwhga3" path="res://Desktop Buddie Sprites/CoverAnimations/placeholdersprite.png" id="9_3yk8d"]
[ext_resource type="Texture2D" uid="uid://doons4hpmnj8m" path="res://Desktop Buddie Sprites/CoverAnimations/Male icon 4.png" id="9_r53wc"]
[ext_resource type="Texture2D" uid="uid://dpgsj3cm15mdw" path="res://Desktop Buddie Sprites/CoverAnimations/Femaile icon 7.png" id="9_v5035"]
[ext_resource type="Texture2D" uid="uid://d15euw560pd2t" path="res://Desktop Buddie Sprites/FTalkSprites/TalkNurtalFemail1 1.png" id="10_k2m8n"]
[ext_resource type="Texture2D" uid="uid://cbp4ykyrrwv7" path="res://Desktop Buddie Sprites/CoverAnimations/Femaile icon 6.png" id="10_odjjr"]
[ext_resource type="Texture2D" uid="uid://y2oxmtc6vu6s" path="res://Desktop Buddie Sprites/CoverAnimations/Male icon 5.png" id="10_pebpy"]
[ext_resource type="Texture2D" uid="uid://2jyjjrencn0k" path="res://Desktop Buddie Sprites/CoverAnimations/placeholdersprite 2.png" id="10_uvpfp"]
[ext_resource type="Texture2D" uid="uid://cl25ai7ujkkwa" path="res://Desktop Buddie Sprites/CoverAnimations/Femaile icon 5.png" id="11_nq8ss"]
[ext_resource type="Texture2D" uid="uid://bdvhs883g484g" path="res://Desktop Buddie Sprites/CoverAnimations/Male icon 6.png" id="11_qgsi0"]
[ext_resource type="Texture2D" uid="uid://cisqetm4jeo8j" path="res://Desktop Buddie Sprites/Pet/Pet 1.png" id="11_viv21"]
[ext_resource type="Texture2D" uid="uid://ciacvjde0yprp" path="res://Desktop Buddie Sprites/Sleep/Sleep 1.png" id="12_gdhla"]
[ext_resource type="Texture2D" uid="uid://dm314ntb7b4to" path="res://Desktop Buddie Sprites/CoverAnimations/Male icon 7.png" id="12_mf6xi"]
[ext_resource type="Script" uid="uid://ijq40d3y0iwe" path="res://FlipifonRight.gd" id="12_viv21"]
[ext_resource type="Texture2D" uid="uid://b1lufm5f2nv2n" path="res://Desktop Buddie Sprites/Sleep/Sleep 2.png" id="13_h8rcm"]
[ext_resource type="Texture2D" uid="uid://cy5v30v0mx8sg" path="res://Desktop Buddie Sprites/Sleep/Sleep 3.png" id="14_8y33c"]
[ext_resource type="Texture2D" uid="uid://n8klyxodb6os" path="res://Desktop Buddie Sprites/Sleep/Sleep 4.png" id="15_slrkm"]
[ext_resource type="Texture2D" uid="uid://g23nnonk2p6s" path="res://Desktop Buddie Sprites/Sleep/Sleep 5.png" id="16_0ww21"]
[ext_resource type="Texture2D" uid="uid://qcbkmn5iu206" path="res://Desktop Buddie Sprites/Sleep/Sleep 6.png" id="17_j6s8t"]
[ext_resource type="Texture2D" uid="uid://dui22tuogn0ey" path="res://Desktop Buddie Sprites/Sleep/Sleep 7.png" id="18_faklv"]
[ext_resource type="Texture2D" uid="uid://cp0hixxcivy65" path="res://Desktop Buddie Sprites/Sleep/Sleep 8.png" id="19_3yk8d"]
[ext_resource type="Texture2D" uid="uid://qbyx36jcunix" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2026-01-07 221057.png" id="20_sdsqc"]
[ext_resource type="Texture2D" uid="uid://d1iwx2in21jti" path="res://Desktop Buddie Sprites/Down/Down 1.png" id="20_uvpfp"]
[ext_resource type="Texture2D" uid="uid://t4ebqfpbrbtf" path="res://Desktop Buddie Sprites/Right/Right 1.png" id="21_0ikq1"]
[ext_resource type="Texture2D" uid="uid://3wbdtasyfxh" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2026-01-07 221121.png" id="21_at0my"]
[ext_resource type="Texture2D" uid="uid://cqua7it7l4i2j" path="res://Desktop Buddie Sprites/Left/Left 1.png" id="22_nno2f"]
[ext_resource type="Texture2D" uid="uid://tudouroq4a8s" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2026-01-07 220453.png" id="22_v5035"]
[ext_resource type="Texture2D" uid="uid://duj53mthnqiad" path="res://Desktop Buddie Sprites/FTalkSprites/TalkAngryFemail1 2.png" id="23_gdhla"]
[ext_resource type="Texture2D" uid="uid://cihlw8a5pjyb6" path="res://Desktop Buddie Sprites/Up/Up 1.png" id="23_gukr6"]
[ext_resource type="Texture2D" uid="uid://bjj8aeb3bwmjc" path="res://Desktop Buddie Sprites/FTalkSprites/TalkNurtalFemail1 2.png" id="23_k2m8n"]
[ext_resource type="Texture2D" uid="uid://b1638ra5j50kv" path="res://Desktop Buddie Sprites/Dizzy/Dizzy 1.png" id="24_3cu87"]
[ext_resource type="Texture2D" uid="uid://mw7ea44jmkll" path="res://Desktop Buddie Sprites/FTalkSprites/TalkAngryFemail1 1.png" id="24_h8rcm"]
[ext_resource type="Texture2D" uid="uid://qhpv27o6x608" path="res://Desktop Buddie Sprites/FTalkSprites/TalkHappyFemail1 2.png" id="25_0ww21"]
[ext_resource type="Texture2D" uid="uid://bv7ocncx6jxyt" path="res://Desktop Buddie Sprites/Dizzy/Dizzy 2.png" id="25_hfyop"]
[ext_resource type="Texture2D" uid="uid://cpuhp6gxa622h" path="res://Desktop Buddie Sprites/Dizzy/Dizzy 3.png" id="26_0p4dw"]
[ext_resource type="Texture2D" uid="uid://cvvoci7jsewvg" path="res://Desktop Buddie Sprites/FTalkSprites/TalkSadFemail1 2.png" id="26_8y33c"]
[ext_resource type="Texture2D" uid="uid://gulspcahl34d" path="res://Desktop Buddie Sprites/FTalkSprites/TalkHappyFemail1 1.png" id="26_j6s8t"]
[ext_resource type="Texture2D" uid="uid://vrlqh46pouqd" path="res://Desktop Buddie Sprites/Dizzy/Dizzy 4.png" id="27_78ikg"]
[ext_resource type="Texture2D" uid="uid://bl85i1kkqbyxg" path="res://Desktop Buddie Sprites/FTalkSprites/TalkSadFemail1 1.png" id="27_slrkm"]
[ext_resource type="Texture2D" uid="uid://bvj1e4uai6nqh" path="res://Desktop Buddie Sprites/Dizzy/Dizzy 5.png" id="28_nlxy1"]
[ext_resource type="Texture2D" uid="uid://jv8nradyrmv6" path="res://Desktop Buddie Sprites/Dizzy/Dizzy 6.png" id="29_r53wc"]
[ext_resource type="Script" uid="uid://bcll66ou1xhnk" path="res://SleepAnimation.gd" id="30_pebpy"]
[ext_resource type="Texture2D" uid="uid://by8i5s6081it5" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2025-06-13 085146.png" id="31_qgsi0"]
[ext_resource type="Texture2D" uid="uid://ba0cb4k0kdood" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2025-06-13 085142.png" id="32_mf6xi"]
[ext_resource type="Script" uid="uid://bki1cvhowv6t5" path="res://addons/gopilot_utils/classes/chat_requester.gd" id="35_at0my"]
[ext_resource type="Texture2D" uid="uid://bi8uq75cxg0r5" path="res://Desktop Buddie Sprites/tryangleDown.png" id="37_odjjr"]
[ext_resource type="Texture2D" uid="uid://kb4y8myt46fj" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2025-06-25 015520.png" id="38_nq8ss"]
[ext_resource type="Texture2D" uid="uid://co7qmqfulu86m" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2025-06-25 015528.png" id="39_bwtku"]
[ext_resource type="Texture2D" uid="uid://by8uf5q7es1nr" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2025-06-25 015538.png" id="40_vys6h"]
[ext_resource type="Texture2D" uid="uid://b70m3lqs1ayal" path="res://Desktop Buddie Sprites/Placeholder/Screenshot 2025-06-25 015555.png" id="41_q1wur"]
[ext_resource type="Script" uid="uid://280smi7vsmt6" path="res://Scenes/MouseLocation.gd" id="42_4lfhb"]
[ext_resource type="Script" uid="uid://cmns7jiiomv25" path="res://movewithwindow.gd" id="42_igrck"]
[ext_resource type="Script" uid="uid://lib7wkqbiakl" path="res://PetlilFella.gd" id="43_0srh0"]
[ext_resource type="Script" uid="uid://brnnmw1cxlqn0" path="res://FollowWindow.gd" id="44_p76eb"]
[ext_resource type="Script" uid="uid://4roqni165ehl" path="res://EditSystemPrompt.gd" id="48_uvpfp"]

[sub_resource type="SpriteFrames" id="SpriteFrames_507mg"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("5_mf6xi")
}, {
"duration": 1.0,
"texture": ExtResource("6_bqt71")
}, {
"duration": 1.0,
"texture": ExtResource("7_sdsqc")
}, {
"duration": 1.0,
"texture": ExtResource("8_at0my")
}, {
"duration": 1.0,
"texture": ExtResource("9_v5035")
}, {
"duration": 1.0,
"texture": ExtResource("10_odjjr")
}, {
"duration": 1.0,
"texture": ExtResource("5_mf6xi")
}, {
"duration": 1.0,
"texture": ExtResource("6_bqt71")
}, {
"duration": 1.0,
"texture": ExtResource("7_sdsqc")
}, {
"duration": 1.0,
"texture": ExtResource("8_at0my")
}, {
"duration": 1.0,
"texture": ExtResource("11_nq8ss")
}, {
"duration": 1.0,
"texture": ExtResource("10_odjjr")
}],
"loop": true,
"name": &"Cover F",
"speed": 7.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_0p4dw")
}, {
"duration": 1.0,
"texture": ExtResource("7_78ikg")
}, {
"duration": 1.0,
"texture": ExtResource("8_nlxy1")
}, {
"duration": 1.0,
"texture": ExtResource("9_r53wc")
}, {
"duration": 1.0,
"texture": ExtResource("10_pebpy")
}, {
"duration": 1.0,
"texture": ExtResource("11_qgsi0")
}, {
"duration": 1.0,
"texture": ExtResource("6_0p4dw")
}, {
"duration": 1.0,
"texture": ExtResource("7_78ikg")
}, {
"duration": 1.0,
"texture": ExtResource("8_nlxy1")
}, {
"duration": 1.0,
"texture": ExtResource("9_r53wc")
}, {
"duration": 1.0,
"texture": ExtResource("12_mf6xi")
}, {
"duration": 1.0,
"texture": ExtResource("11_qgsi0")
}],
"loop": true,
"name": &"Cover M",
"speed": 7.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_k2m8n")
}],
"loop": true,
"name": &"NutralTalkFemail",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("20_sdsqc")
}],
"loop": true,
"name": &"Ouch left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("21_at0my")
}],
"loop": true,
"name": &"Ouch right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("22_v5035")
}],
"loop": true,
"name": &"Ouch top",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("11_viv21")
}],
"loop": true,
"name": &"Pet",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("9_3yk8d")
}, {
"duration": 1.0,
"texture": ExtResource("10_uvpfp")
}],
"loop": true,
"name": &"Placeholder",
"speed": 2.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("12_gdhla")
}, {
"duration": 1.0,
"texture": ExtResource("13_h8rcm")
}, {
"duration": 1.0,
"texture": ExtResource("14_8y33c")
}, {
"duration": 1.0,
"texture": ExtResource("15_slrkm")
}, {
"duration": 1.0,
"texture": ExtResource("16_0ww21")
}, {
"duration": 1.0,
"texture": ExtResource("17_j6s8t")
}, {
"duration": 1.0,
"texture": ExtResource("18_faklv")
}, {
"duration": 1.0,
"texture": ExtResource("19_3yk8d")
}],
"loop": true,
"name": &"Sleep",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("23_gdhla")
}],
"loop": true,
"name": &"Talk Angry F 1",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("24_h8rcm")
}],
"loop": true,
"name": &"Talk Angry F 2",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("25_0ww21")
}],
"loop": true,
"name": &"Talk Happy F 1",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("26_j6s8t")
}],
"loop": true,
"name": &"Talk Happy F 2",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("23_k2m8n")
}],
"loop": true,
"name": &"Talk Nutral F 1",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_k2m8n")
}],
"loop": true,
"name": &"Talk Nutral F 2",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("26_8y33c")
}],
"loop": true,
"name": &"Talk Sad F 1",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("27_slrkm")
}],
"loop": true,
"name": &"Talk Sad F 2",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("20_uvpfp")
}],
"loop": true,
"name": &"held_down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("21_0ikq1")
}],
"loop": true,
"name": &"held_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("22_nno2f")
}],
"loop": true,
"name": &"held_right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("23_gukr6")
}],
"loop": true,
"name": &"held_up",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("24_3cu87")
}, {
"duration": 1.0,
"texture": ExtResource("25_hfyop")
}, {
"duration": 1.0,
"texture": ExtResource("26_0p4dw")
}, {
"duration": 1.0,
"texture": ExtResource("27_78ikg")
}, {
"duration": 1.0,
"texture": ExtResource("28_nlxy1")
}, {
"duration": 1.0,
"texture": ExtResource("29_r53wc")
}],
"loop": true,
"name": &"normal_hold",
"speed": 5.0
}]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_qgsi0"]
load_path = "res://.godot/imported/Little Fella Sleep 1.png-1fa48c063cb377fe413ea9345ca0d995.ctex"

[sub_resource type="GDScript" id="GDScript_igvuv"]
script/source = "extends VBoxContainer

# ---------------- UI NODES (hook these up in the Inspector) ----------------
@export var conversation: RichTextLabel
@export var last_ai: RichTextLabel
@export var prompt: LineEdit

# --- THREE chat requesters ---
@export var chat1: ChatRequester
@export var chat2: ChatRequester
@export var chat3: ChatRequester

# Local provider UI
@export var local_host_input: LineEdit
@export var local_port_input: SpinBox
@export var local_model_input: LineEdit
@export var local_temp_input: SpinBox

# OpenRouter provider UI
@export var or_model_input: LineEdit
@export var or_temp_input: SpinBox

# OpenRouter options
@export var or_api_key_input: LineEdit
@export var or_tokens_max_input: SpinBox
@export var or_title_input: LineEdit
@export var or_referer_input: LineEdit

# Buttons
@export var btn_openrouter: Button
@export var btn_local: Button
@export var btn_chat1: Button
@export var btn_chat2: Button
@export var btn_chat3: Button

# ---------------- THING TO HIDE WHEN FACES ARE SHOWING ----------------
@export var hide_when_face_visible: Node

# ---------------- IDLE TIMEOUT ----------------
@export var user_idle_timeout_seconds: float = 20.0

# ---------------- AI INDICATORS ----------------
# 3 AnimatedSprite2D indicators shown depending on which ChatRequester is active
@export_node_path(\"AnimatedSprite2D\") var ai_indicator_1_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var ai_indicator_2_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var ai_indicator_3_path: NodePath

var _ai_ind_1: AnimatedSprite2D
var _ai_ind_2: AnimatedSprite2D
var _ai_ind_3: AnimatedSprite2D

# ---------------- CUSTOM COMMAND MESSAGES ----------------
@export_multiline var creator_message: String = \"Made by (Your Name)\"
@export_multiline var crid_message: String = \"Credits: (Your Credits Here)\"

# =============================================================================
# 3 SETS OF EMOTION \"FACES\" (AnimatedSprite2D via NodePath)
# - One set per ChatRequester (Chat 1 / Chat 2 / Chat 3)
# - 4 emotions per set (happy / neutral / sad / angry)
# - 2 versions per emotion (idle / open)
# =============================================================================

# -------- SET 1 (used when _chat_index == 0) --------
@export_node_path(\"AnimatedSprite2D\") var s1_happy_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s1_happy_open_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s1_neutral_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s1_neutral_open_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s1_sad_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s1_sad_open_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s1_angry_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s1_angry_open_path: NodePath

# -------- SET 2 (used when _chat_index == 1) --------
@export_node_path(\"AnimatedSprite2D\") var s2_happy_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s2_happy_open_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s2_neutral_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s2_neutral_open_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s2_sad_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s2_sad_open_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s2_angry_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s2_angry_open_path: NodePath

# -------- SET 3 (used when _chat_index == 2) --------
@export_node_path(\"AnimatedSprite2D\") var s3_happy_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s3_happy_open_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s3_neutral_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s3_neutral_open_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s3_sad_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s3_sad_open_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s3_angry_idle_path: NodePath
@export_node_path(\"AnimatedSprite2D\") var s3_angry_open_path: NodePath

# Each set is a Dictionary:
# {\"happy_idle\": AnimatedSprite2D, \"happy_open\": ..., \"neutral_idle\": ..., ...}
var _face_sets: Array = []

# RegEx helpers for yelling detection
var _re_word: RegEx
var _re_has_letter: RegEx

# ---------------- CONFIG ----------------
enum Mode { LOCAL, OPENROUTER }
@export var default_mode: int = Mode.LOCAL

# ---- Local (Ollama) ----
@export var local_host: String = \"http://127.0.0.1\"
@export var local_port: int = 11434
@export var local_model: String = \"llama3.2\"
@export var local_temperature: float = 0.2

# ---- OpenRouter ----
@export var or_api_key: String = \"\"
@export var or_model: String = \"openai/gpt-4o-mini\"
@export var or_temperature: float = 0.2
@export var or_max_tokens: int = 30
@export var or_http_referer: String = \"\"
@export var or_title: String = \"\"

# ---------------- STATE ----------------
var _mode: int
var _buffer: String = \"\"
var _generating: bool = false
var _signals_wired: bool = false
var _chats: Array[ChatRequester] = []
var _chat_index: int = 0
var _last_live_emotion: String = \"neutral\"

# Idle behavior state
var _idle_timer: Timer
var _faces_suspended: bool = false

# ---------------- SAVE SYSTEM ----------------
const _SAVE_PATH := \"user://chat_logs_save.json\"
var _save_timer: Timer
var _histories: Array = [[], [], []] # per chat: array of {\"role\":\"user\"/\"assistant\",\"text\":\"...\"}

# ---------------- LIFECYCLE ----------------
func _ready() -> void:
	if conversation == null or prompt == null:
		push_error(\"Hook up 'conversation' and 'prompt' in the Inspector.\")
		return

	# Compile regexes once
	_re_word = RegEx.new()
	_re_word.compile(r\"[A-Za-z0-9']+\")
	_re_has_letter = RegEx.new()
	_re_has_letter.compile(r\"[A-Za-z]\")

	# Create idle timer
	_idle_timer = Timer.new()
	_idle_timer.one_shot = true
	add_child(_idle_timer)
	_idle_timer.timeout.connect(_on_user_idle_timeout)

	# Save debounce timer
	_save_timer = Timer.new()
	_save_timer.one_shot = true
	_save_timer.wait_time = 0.4
	add_child(_save_timer)
	_save_timer.timeout.connect(_save_state)

	# Build chat list
	_chats.clear()
	if chat1: _chats.append(chat1)
	if chat2: _chats.append(chat2)
	if chat3: _chats.append(chat3)
	if _chats.is_empty():
		push_error(\"Hook up at least one ChatRequester.\")
		return

	for c in _chats:
		c.automatically_add_messages = false

	conversation.bbcode_enabled = true
	if last_ai:
		last_ai.bbcode_enabled = true
		last_ai.text = \"\"

	# Load saved state (chat_index + histories + log)
	_load_state()
	_chat_index = clampi(_chat_index, 0, _chats.size() - 1)

	# Restore ChatRequester memory from histories BEFORE binding signals
	_restore_chatrequester_conversations_from_history()

	_mode = default_mode
	_wire_signals_once()
	_bind_chat_signals(_chat())
	_sync_ui_from_vars()
	_apply_mode()

	# Build face sets
	_build_face_sets()

	# Resolve AI indicators
	_ai_ind_1 = get_node_or_null(ai_indicator_1_path) as AnimatedSprite2D
	_ai_ind_2 = get_node_or_null(ai_indicator_2_path) as AnimatedSprite2D
	_ai_ind_3 = get_node_or_null(ai_indicator_3_path) as AnimatedSprite2D
	_update_ai_indicator()

	_last_live_emotion = \"neutral\"
	_faces_suspended = false
	_refresh_face_display()
	_restart_idle_timer()

func _exit_tree() -> void:
	_save_state()

# ---------------- CHAT CORE ----------------
func _chat() -> ChatRequester:
	return _chats[_chat_index]

func _bind_chat_signals(c: ChatRequester) -> void:
	if c == null: return
	if not c.new_word.is_connected(_on_word):
		c.new_word.connect(_on_word)
	if not c.message_end.is_connected(_on_end):
		c.message_end.connect(_on_end)

func _unbind_chat_signals(c: ChatRequester) -> void:
	if c == null: return
	if c.new_word.is_connected(_on_word):
		c.new_word.disconnect(_on_word)
	if c.message_end.is_connected(_on_end):
		c.message_end.disconnect(_on_end)

# ---------------- INPUT & BUTTONS ----------------
func _wire_signals_once() -> void:
	if _signals_wired: return
	if not prompt.text_submitted.is_connected(_on_submit):
		prompt.text_submitted.connect(_on_submit)

	if btn_openrouter and not btn_openrouter.pressed.is_connected(_on_click_openrouter):
		btn_openrouter.pressed.connect(_on_click_openrouter)
	if btn_local and not btn_local.pressed.is_connected(_on_click_local):
		btn_local.pressed.connect(_on_click_local)

	if btn_chat1 and not btn_chat1.pressed.is_connected(_on_click_chat1):
		btn_chat1.pressed.connect(_on_click_chat1)
	if btn_chat2 and not btn_chat2.pressed.is_connected(_on_click_chat2):
		btn_chat2.pressed.connect(_on_click_chat2)
	if btn_chat3 and not btn_chat3.pressed.is_connected(_on_click_chat3):
		btn_chat3.pressed.connect(_on_click_chat3)

	_signals_wired = true

func _unhandled_input(event: InputEvent) -> void:
	if event is InputEventKey and event.pressed and not event.echo:
		match event.keycode:
			KEY_F1:
				_mode = Mode.OPENROUTER if _mode == Mode.LOCAL else Mode.LOCAL
				_apply_mode()
				var mode_name := \"Local (Ollama)\" if _mode == Mode.LOCAL else \"OpenRouter\"
				_append_system(\"Switched provider to %s\" % mode_name)
			KEY_1: _switch_chat(0)
			KEY_2: _switch_chat(1)
			KEY_3: _switch_chat(2)

# ---------------- CHAT SWITCHING ----------------
func _switch_chat(i: int) -> void:
	if i < 0 or i >= _chats.size(): return
	if _generating:
		_append_system(\"Finish generating before switching chats.\")
		return
	if _chat_index == i: return

	var old := _chat()
	_unbind_chat_signals(old)
	_chat_index = i
	var now := _chat()
	_bind_chat_signals(now)

	_apply_mode()
	_update_chat_button_states()
	_append_system(\"Switched to Chat %d\" % (i + 1))

	# ✅ CLEAR LIVE AI OUTPUT so it doesn't look like another AI said it
	if last_ai:
		last_ai.text = \"\"

	_buffer = \"\"  # prevents emotion analysis using old text

	_update_ai_indicator()

	_faces_suspended = false
	_refresh_face_display()
	_restart_idle_timer()
	_schedule_save()


func _update_chat_button_states() -> void:
	if btn_chat1: btn_chat1.disabled = (_chat_index == 0)
	if btn_chat2: btn_chat2.disabled = (_chat_index == 1)
	if btn_chat3: btn_chat3.disabled = (_chat_index == 2)

func _on_click_chat1() -> void: _switch_chat(0)
func _on_click_chat2() -> void: _switch_chat(1)
func _on_click_chat3() -> void: _switch_chat(2)

# ---------------- APPLY MODE ----------------
func _apply_mode() -> void:
	var chat := _chat()
	# IMPORTANT: do NOT clear conversation here (we want persistence)

	if _mode == Mode.LOCAL:
		chat.set_provider(\"ollama\", true)
		var host_now := local_host_input.text if local_host_input else local_host
		var port_now := int(local_port_input.value) if local_port_input else local_port
		var model_now := local_model_input.text if local_model_input else local_model
		var temp_now := float(local_temp_input.value) if local_temp_input else local_temperature

		local_host = host_now
		local_port = port_now
		local_model = model_now
		local_temperature = temp_now

		chat.host = host_now
		chat.port = port_now
		chat.model = model_now
		chat.temperature = temp_now
		chat.api_key = \"\"
		chat.options = {}
	else:
		chat.set_provider(\"openrouter\", true)
		var api_key_now := or_api_key_input.text if or_api_key_input else or_api_key
		var model_now_or := or_model_input.text if or_model_input else or_model
		var temp_now_or := float(or_temp_input.value) if or_temp_input else or_temperature
		var max_tok_now := int(or_tokens_max_input.value) if or_tokens_max_input else or_max_tokens
		var title_now := or_title_input.text if or_title_input else or_title
		var referer_now := or_referer_input.text if or_referer_input else or_http_referer

		or_api_key = api_key_now
		or_model = model_now_or
		or_temperature = temp_now_or
		or_max_tokens = max_tok_now
		or_title = title_now
		or_http_referer = referer_now

		chat.api_key = api_key_now
		chat.model = model_now_or
		chat.temperature = temp_now_or
		var opts: Dictionary = {\"max_tokens\": max_tok_now}
		if title_now.strip_edges() != \"\":
			opts[\"x_title\"] = title_now
		if referer_now.strip_edges() != \"\":
			opts[\"http_referer\"] = referer_now
		chat.options = opts

	_update_button_states()
	_update_chat_button_states()

func _update_button_states() -> void:
	if btn_openrouter: btn_openrouter.disabled = (_mode == Mode.OPENROUTER)
	if btn_local: btn_local.disabled = (_mode == Mode.LOCAL)

func _on_click_openrouter() -> void:
	_mode = Mode.OPENROUTER
	_apply_mode()
	_append_system(\"Switched to OpenRouter\")
	_schedule_save()

func _on_click_local() -> void:
	_mode = Mode.LOCAL
	_apply_mode()
	_append_system(\"Switched to Local (Ollama)\")
	_schedule_save()

# ---------------- IDLE TIMER ----------------
func _restart_idle_timer() -> void:
	if user_idle_timeout_seconds <= 0.0:
		return
	if _idle_timer:
		_idle_timer.stop()
		_idle_timer.wait_time = user_idle_timeout_seconds
		_idle_timer.start()

func _on_user_idle_timeout() -> void:
	if _generating:
		_restart_idle_timer()
		return
	_faces_suspended = true
	_refresh_face_display()

# ---------------- COMMANDS ----------------
func _is_command(t: String) -> bool:
	return t.begins_with(\"/\")

func _handle_command(t: String) -> void:
	var cmd := t.strip_edges()
	if cmd == \"\":
		return

	var head := cmd.split(\" \", false)[0].to_lower()

	match head:
		\"/help\":
			_append_system(\"Commands: /help, /clear, /save, /happy, /sad, /neutral (/nutral), /angry, /creator, /crid\")
		\"/save\":
			_save_state()
			_append_system(\"Saved.\")
		\"/clear\":
			_clear_all_chats_boot_reset()
		\"/happy\":
			_force_emotion(\"happy\")
		\"/sad\":
			_force_emotion(\"sad\")
		\"/neutral\":
			_force_emotion(\"neutral\")
		\"/nutral\":
			_force_emotion(\"neutral\")
		\"/angry\":
			_force_emotion(\"angry\")
		\"/creator\":
			_emit_fake_ai_message(creator_message)
		\"/crid\":
			_emit_fake_ai_message(crid_message)
		_:
			_append_system(\"Unknown command: %s  (try /help)\" % head)

func _force_emotion(e: String) -> void:
	_faces_suspended = false
	_last_live_emotion = e
	_generating = false
	_refresh_face_display()
	_restart_idle_timer()

# /creator and /crid should look like a normal assistant reply:
# - appears in last_ai (AI output area)
# - appears in conversation as assistant line
# - saved to history + inserted into ChatRequester conversation
func _emit_fake_ai_message(msg: String) -> void:
	var safe := \"\"
	if msg != null:
		safe = msg.strip_edges()
	if safe == \"\":
		safe = \"(empty)\"

	_faces_suspended = false
	_generating = false
	_buffer = safe

	_set_last_ai(safe)

	var tag := \"Local\" if _mode == Mode.LOCAL else \"OpenRouter\"
	conversation.append_text(\"[color=#88f]%s (Chat %d):[/color] %s\\n\" % [tag, _chat_index + 1, safe])
	conversation.scroll_to_line(conversation.get_line_count())

	_last_live_emotion = _analyze_emotion(safe)
	_refresh_face_display()

	_histories[_chat_index].append({\"role\":\"assistant\",\"text\":safe})
	_chat().send_message(safe, ChatRequester.chat_role.ASSISTANT, false)

	_schedule_save()
	_restart_idle_timer()

# /clear should return to \"booted up\" look:
# - clear logs + histories + chatrequester conversations
# - show neutral face (NOT placeholder)
func _clear_all_chats_boot_reset() -> void:
	if _generating:
		_append_system(\"Can't clear while generating.\")
		return

	_histories = [[], [], []]

	for cr in _chats:
		if cr:
			cr.clear_conversation(true)

	if conversation:
		conversation.text = \"\"
	if last_ai:
		last_ai.text = \"\"

	# Boot-like state
	_buffer = \"\"
	_generating = false
	_faces_suspended = false
	_last_live_emotion = \"neutral\"
	_refresh_face_display()

	_schedule_save()
	_restart_idle_timer()

# ---------------- SEND / STREAM ----------------
func _on_submit(text: String) -> void:
	var t := text.strip_edges()
	if t.is_empty():
		return

	if _is_command(t):
		_handle_command(t)
		prompt.clear()
		return

	if _generating:
		_append_system(\"Still answering…\")
		return

	_faces_suspended = false
	_restart_idle_timer()

	_generating = true
	prompt.editable = false
	_buffer = \"\"
	_last_live_emotion = \"neutral\"
	_refresh_face_display()

	conversation.append_text(\"\\n[b]You:[/b] %s\\n\" % t)
	_set_last_ai(\"[i]thinking…[/i]\")

	_histories[_chat_index].append({\"role\":\"user\",\"text\":t})
	_schedule_save()

	var chat := _chat()
	chat.send_message(t)
	chat.start_response()
	prompt.clear()

func _on_word(w: String) -> void:
	_buffer += w
	_set_last_ai(_buffer)

	# keep mouth-open animation while generating
	_refresh_face_display()

	if _buffer.length() % 10 == 0:
		var emotion := _analyze_emotion(_buffer)
		if emotion != _last_live_emotion:
			_last_live_emotion = emotion
			_refresh_face_display()

func _on_end(_full: String) -> void:
	# tiny de-dupe fix
	if _buffer.length() % 2 == 0:
		var half := _buffer.substr(0, _buffer.length() / 2)
		if half + half == _buffer:
			_buffer = half

	var tag := \"Local\" if _mode == Mode.LOCAL else \"OpenRouter\"
	conversation.append_text(\"[color=#88f]%s (Chat %d):[/color] %s\\n\" % [tag, _chat_index + 1, _buffer])
	conversation.scroll_to_line(conversation.get_line_count())
	_set_last_ai(_buffer)

	_generating = false
	prompt.editable = true

	var final_emotion := _analyze_emotion(_buffer)
	_last_live_emotion = final_emotion
	_refresh_face_display()

	_histories[_chat_index].append({\"role\":\"assistant\",\"text\":_buffer})
	_chat().send_message(_buffer, ChatRequester.chat_role.ASSISTANT, false)

	_schedule_save()
	_restart_idle_timer()

	if _mode == Mode.OPENROUTER and _buffer.find(\"Insufficient credits\") != -1:
		_append_system(\"OpenRouter credits empty — switching to Local.\")
		_mode = Mode.LOCAL
		_apply_mode()
		_schedule_save()

# ---------------- FACE SET BUILDING ----------------
func _make_face_set(
	happy_idle_p: NodePath, happy_open_p: NodePath,
	neutral_idle_p: NodePath, neutral_open_p: NodePath,
	sad_idle_p: NodePath, sad_open_p: NodePath,
	angry_idle_p: NodePath, angry_open_p: NodePath
) -> Dictionary:
	return {
		\"happy_idle\": get_node_or_null(happy_idle_p) as AnimatedSprite2D,
		\"happy_open\": get_node_or_null(happy_open_p) as AnimatedSprite2D,
		\"neutral_idle\": get_node_or_null(neutral_idle_p) as AnimatedSprite2D,
		\"neutral_open\": get_node_or_null(neutral_open_p) as AnimatedSprite2D,
		\"sad_idle\": get_node_or_null(sad_idle_p) as AnimatedSprite2D,
		\"sad_open\": get_node_or_null(sad_open_p) as AnimatedSprite2D,
		\"angry_idle\": get_node_or_null(angry_idle_p) as AnimatedSprite2D,
		\"angry_open\": get_node_or_null(angry_open_p) as AnimatedSprite2D,
	}

func _build_face_sets() -> void:
	_face_sets.clear()

	_face_sets.append(_make_face_set(
		s1_happy_idle_path, s1_happy_open_path,
		s1_neutral_idle_path, s1_neutral_open_path,
		s1_sad_idle_path, s1_sad_open_path,
		s1_angry_idle_path, s1_angry_open_path
	))

	_face_sets.append(_make_face_set(
		s2_happy_idle_path, s2_happy_open_path,
		s2_neutral_idle_path, s2_neutral_open_path,
		s2_sad_idle_path, s2_sad_open_path,
		s2_angry_idle_path, s2_angry_open_path
	))

	_face_sets.append(_make_face_set(
		s3_happy_idle_path, s3_happy_open_path,
		s3_neutral_idle_path, s3_neutral_open_path,
		s3_sad_idle_path, s3_sad_open_path,
		s3_angry_idle_path, s3_angry_open_path
	))

# ---------------- AI INDICATOR HELPERS ----------------
func _hide_all_ai_indicators() -> void:
	if _ai_ind_1: _ai_ind_1.visible = false
	if _ai_ind_2: _ai_ind_2.visible = false
	if _ai_ind_3: _ai_ind_3.visible = false

func _show_ai_indicator(ind: AnimatedSprite2D) -> void:
	if ind == null: return
	ind.visible = true
	if ind.sprite_frames and ind.sprite_frames.get_animation_names().size() > 0:
		ind.play()

func _update_ai_indicator() -> void:
	_hide_all_ai_indicators()
	match _chat_index:
		0: _show_ai_indicator(_ai_ind_1)
		1: _show_ai_indicator(_ai_ind_2)
		2: _show_ai_indicator(_ai_ind_3)

# ---------------- FACE DISPLAY LOGIC ----------------
func _set_node_visible(n: Node, v: bool) -> void:
	if n == null: return
	if n is CanvasItem:
		(n as CanvasItem).visible = v
	else:
		n.set(\"visible\", v)

func _hide_all_faces_all_sets() -> void:
	for set_dict in _face_sets:
		for k in set_dict:
			var n := set_dict[k] as AnimatedSprite2D
			if n:
				n.visible = false

func _show_face(node: AnimatedSprite2D) -> void:
	if node == null: return
	node.visible = true
	if node.sprite_frames and node.sprite_frames.get_animation_names().size() > 0:
		node.play()

func _get_active_face_set() -> Dictionary:
	if _face_sets.is_empty():
		return {}
	var idx := _chat_index
	if idx < 0: idx = 0
	if idx >= _face_sets.size(): idx = _face_sets.size() - 1
	return _face_sets[idx]

# RULE: if placeholder is visible, NO faces are visible.
func _show_placeholder_only(show_placeholder: bool) -> void:
	if show_placeholder:
		_hide_all_faces_all_sets()
	if hide_when_face_visible:
		_set_node_visible(hide_when_face_visible, show_placeholder)

func _refresh_face_display() -> void:
	if _faces_suspended:
		_show_placeholder_only(true)
		return

	_hide_all_faces_all_sets()

	var set_dict := _get_active_face_set()
	if set_dict.is_empty():
		_show_placeholder_only(true)
		return

	var use_open := _generating
	var e := _last_live_emotion

	var face_to_show: AnimatedSprite2D = null
	if e == \"happy\":
		face_to_show = set_dict[\"happy_open\"] if use_open else set_dict[\"happy_idle\"]
	elif e == \"sad\":
		face_to_show = set_dict[\"sad_open\"] if use_open else set_dict[\"sad_idle\"]
	elif e == \"angry\":
		face_to_show = set_dict[\"angry_open\"] if use_open else set_dict[\"angry_idle\"]
	else:
		face_to_show = set_dict[\"neutral_open\"] if use_open else set_dict[\"neutral_idle\"]

	_show_placeholder_only(face_to_show == null)
	_show_face(face_to_show)

# ---------------- EMOTION ANALYSIS ----------------
func _analyze_emotion(text: String) -> String:
	text = text.strip_edges()
	if text.is_empty():
		return \"neutral\"

	# YELLING DETECTION (caps-heavy)
	var matches := _re_word.search_all(text)
	var total_words := 0
	var all_caps_words := 0

	for m in matches:
		var token := m.get_string()
		if _re_has_letter.search(token) == null:
			continue
		total_words += 1
		if token.length() > 1 and token == token.to_upper():
			all_caps_words += 1

	if total_words >= 4 and float(all_caps_words) / float(total_words) > 0.5:
		return \"angry\"

	var lower := text.to_lower()
	var happy_words = [\"happy\", \"glad\", \"joy\", \"great\", \"wonderful\", \"awesome\", \"smile\", \"love\"]
	var sad_words = [\"sad\", \"unhappy\", \"depressed\", \"cry\", \"bad\", \"sorry\", \"pain\", \"tears\"]
	var angry_words = [\"angry\", \"mad\", \"furious\", \"annoyed\", \"hate\", \"irritated\", \"rage\", \"disgust\"]

	var happy_score := 0
	var sad_score := 0
	var angry_score := 0

	for w in happy_words:
		if lower.find(w) != -1: happy_score += 1
	for w in sad_words:
		if lower.find(w) != -1: sad_score += 1
	for w in angry_words:
		if lower.find(w) != -1: angry_score += 1

	if angry_score > sad_score and angry_score > happy_score:
		return \"angry\"
	elif sad_score > angry_score and sad_score > happy_score:
		return \"sad\"
	elif happy_score > sad_score and happy_score > angry_score:
		return \"happy\"
	else:
		return \"neutral\"

# ---------------- SAVE HELPERS ----------------
func _schedule_save() -> void:
	if _save_timer:
		_save_timer.stop()
		_save_timer.start()

func _save_state() -> void:
	var data: Dictionary = {
		\"version\": 9,
		\"conversation_bbcode\": conversation.text if conversation else \"\",
		\"chat_index\": _chat_index,
		\"histories\": _histories,
	}
	var json := JSON.stringify(data)
	var f := FileAccess.open(_SAVE_PATH, FileAccess.WRITE)
	if f:
		f.store_string(json)
		f.flush()

func _load_state() -> void:
	if not FileAccess.file_exists(_SAVE_PATH):
		return

	var f := FileAccess.open(_SAVE_PATH, FileAccess.READ)
	if f == null:
		return

	var txt := f.get_as_text()
	var parsed = JSON.parse_string(txt)
	if typeof(parsed) != TYPE_DICTIONARY:
		return

	var d: Dictionary = parsed

	if d.has(\"conversation_bbcode\") and conversation:
		conversation.text = str(d[\"conversation_bbcode\"])
		conversation.scroll_to_line(conversation.get_line_count())

	if d.has(\"chat_index\"):
		_chat_index = int(d[\"chat_index\"])

	if d.has(\"histories\") and typeof(d[\"histories\"]) == TYPE_ARRAY:
		_histories = d[\"histories\"]
		while _histories.size() < 3:
			_histories.append([])
		if _histories.size() > 3:
			_histories = [_histories[0], _histories[1], _histories[2]]

func _restore_chatrequester_conversations_from_history() -> void:
	for i in range(_chats.size()):
		var cr: ChatRequester = _chats[i]
		if cr == null:
			continue

		var conv: Array[Dictionary] = []
		conv.append({\"role\":\"system\", \"content\": cr.system_prompt})

		if i < _histories.size() and typeof(_histories[i]) == TYPE_ARRAY:
			var hist: Array = _histories[i]
			for item in hist:
				if typeof(item) != TYPE_DICTIONARY:
					continue
				var di: Dictionary = item
				if not (di.has(\"role\") and di.has(\"text\")):
					continue
				var r := str(di[\"role\"])
				if r != \"user\" and r != \"assistant\":
					continue
				conv.append({\"role\": r, \"content\": str(di[\"text\"])})

		cr.set_conversation(conv)

# ---------------- UI HELPERS ----------------
func _append_system(msg: String) -> void:
	conversation.append_text(\"\\n[System] %s\\n\" % msg)
	conversation.scroll_to_line(conversation.get_line_count())
	_schedule_save()

func _sync_ui_from_vars() -> void:
	if local_host_input: local_host_input.text = local_host
	if local_port_input:
		local_port_input.min_value = 1
		local_port_input.max_value = 65535
		local_port_input.step = 1
		local_port_input.value = local_port
	if local_model_input: local_model_input.text = local_model
	if local_temp_input:
		local_temp_input.min_value = 0.0
		local_temp_input.max_value = 2.0
		local_temp_input.step = 0.01
		local_temp_input.value = local_temperature

	if or_model_input: or_model_input.text = or_model
	if or_temp_input:
		or_temp_input.min_value = 0.0
		or_temp_input.max_value = 2.0
		or_temp_input.step = 0.01
		or_temp_input.value = or_temperature
	if or_api_key_input: or_api_key_input.text = or_api_key
	if or_tokens_max_input:
		or_tokens_max_input.min_value = 1
		or_tokens_max_input.max_value = 32768
		or_tokens_max_input.step = 1
		or_tokens_max_input.value = or_max_tokens
	if or_title_input: or_title_input.text = or_title
	if or_referer_input: or_referer_input.text = or_http_referer

	_update_button_states()
	_update_chat_button_states()

func _set_last_ai(text: String) -> void:
	if last_ai == null: return
	last_ai.text = text
	last_ai.scroll_to_line(last_ai.get_line_count())
"

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_amhny"]
bg_color = Color(0.6, 0.6, 0.6, 0)
border_width_left = 7
border_width_right = 7
border_color = Color(0.83, 0, 0.525667, 0)

[node name="Node2D" type="Node2D"]

[node name="Desktop Fella Main" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Node2D" type="Node2D" parent="Desktop Fella Main" node_paths=PackedStringArray("background")]
script = ExtResource("1_gdhla")
background = NodePath("DesktopfellaBg")
push_strength = 0.0

[node name="DesktopfellaBg" type="Sprite2D" parent="Desktop Fella Main/Node2D"]
position = Vector2(649, 480)
scale = Vector2(0.878646, 0.878375)
texture = ExtResource("2_g1j4k")

[node name="Top Label2" type="Control" parent="Desktop Fella Main"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="VBoxContainer" type="VBoxContainer" parent="Desktop Fella Main/Top Label2"]
layout_mode = 0
offset_right = 1298.0
offset_bottom = 169.0

[node name="HBoxContainer" type="HBoxContainer" parent="Desktop Fella Main/Top Label2/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="PanelContainer" type="PanelContainer" parent="Desktop Fella Main/Top Label2/VBoxContainer/HBoxContainer" node_paths=PackedStringArray("label")]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("3_h8rcm")
label = NodePath("Screenshot2025-06-13085156/Label")
amplitude = 2.5

[node name="Screenshot2025-06-13085155" type="Sprite2D" parent="Desktop Fella Main/Top Label2/VBoxContainer/HBoxContainer/PanelContainer"]
self_modulate = Color(0.956863, 0.803922, 0.372549, 1)
light_mask = 0
position = Vector2(650, 113.28)
scale = Vector2(13.6185, 2.14273)
texture = ExtResource("1_a814b")

[node name="Screenshot2025-06-13085156" type="Sprite2D" parent="Desktop Fella Main/Top Label2/VBoxContainer/HBoxContainer/PanelContainer"]
self_modulate = Color(0.992157, 0.909804, 0.443137, 1)
light_mask = 0
position = Vector2(650, 112.53)
scale = Vector2(13.3785, 1.87188)
texture = ExtResource("1_a814b")

[node name="Label" type="Label" parent="Desktop Fella Main/Top Label2/VBoxContainer/HBoxContainer/PanelContainer/Screenshot2025-06-13085156"]
offset_left = -43.8764
offset_top = -56.0
offset_right = 711.124
offset_bottom = 81.0
scale = Vector2(0.116209, 0.794177)
size_flags_horizontal = 4
theme_override_colors/font_color = Color(1, 0.458824, 0.423529, 1)
theme_override_constants/outline_size = 15
theme_override_font_sizes/font_size = 100
text = "DESKTOP FELLA"

[node name="image+Button" type="Control" parent="Desktop Fella Main"]
layout_mode = 3
anchors_preset = 0
offset_left = 854.0
offset_top = 206.0
offset_right = 894.0
offset_bottom = 246.0

[node name="HBoxContainer" type="HBoxContainer" parent="Desktop Fella Main/image+Button"]
layout_mode = 0
offset_left = -19.0
offset_top = -13.0
offset_right = 462.0
offset_bottom = 573.0
scale = Vector2(0.96, 0.96)

[node name="VBoxContainer" type="VBoxContainer" parent="Desktop Fella Main/image+Button/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="PanelContainer" type="PanelContainer" parent="Desktop Fella Main/image+Button/HBoxContainer/VBoxContainer"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="base of base" type="Sprite2D" parent="Desktop Fella Main/image+Button/HBoxContainer/VBoxContainer/PanelContainer"]
self_modulate = Color(0.956863, 0.803922, 0.372549, 1)
light_mask = 0
position = Vector2(240.625, 292.708)
scale = Vector2(4.65582, 5.97571)
texture = ExtResource("1_a814b")

[node name="base" type="Sprite2D" parent="Desktop Fella Main/image+Button/HBoxContainer/VBoxContainer/PanelContainer/base of base"]
self_modulate = Color(0.992157, 0.909804, 0.443137, 1)
light_mask = 0
scale = Vector2(0.95008, 0.95008)
texture = ExtResource("1_a814b")

[node name="empty" type="AnimatedSprite2D" parent="Desktop Fella Main/image+Button/HBoxContainer/VBoxContainer/PanelContainer/base of base/base" node_paths=PackedStringArray("sprite_Male", "sprite_Female", "sprite_Empty")]
position = Vector2(-0.00012207, -1.83472)
scale = Vector2(0.183917, 0.142342)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Placeholder"
script = ExtResource("30_pebpy")
sprite_Male = NodePath(".")
sprite_Female = NodePath("../Female")
sprite_Empty = NodePath("../male")

[node name="Female" type="AnimatedSprite2D" parent="Desktop Fella Main/image+Button/HBoxContainer/VBoxContainer/PanelContainer/base of base/base" node_paths=PackedStringArray("sprite_Male", "sprite_Female", "sprite_Empty")]
visible = false
position = Vector2(-7.08467e-06, 1.46786)
scale = Vector2(0.183917, 0.142342)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Cover F"
frame_progress = 0.718588
script = ExtResource("30_pebpy")
sprite_Male = NodePath("../empty")
sprite_Female = NodePath(".")
sprite_Empty = NodePath("../male")

[node name="male" type="AnimatedSprite2D" parent="Desktop Fella Main/image+Button/HBoxContainer/VBoxContainer/PanelContainer/base of base/base" node_paths=PackedStringArray("sprite_Male", "sprite_Female", "sprite_Empty")]
visible = false
position = Vector2(-0.00012207, -1.83472)
scale = Vector2(0.183917, 0.142342)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Cover M"
frame_progress = 0.216583
script = ExtResource("30_pebpy")
sprite_Male = NodePath("../empty")
sprite_Female = NodePath("../Female")
sprite_Empty = NodePath(".")

[node name="Button Outline" type="Sprite2D" parent="Desktop Fella Main/image+Button"]
self_modulate = Color(0.956863, 0.803922, 0.372549, 1)
light_mask = 0
position = Vector2(211, 628.598)
scale = Vector2(4.70968, 2.07731)
texture = ExtResource("1_a814b")

[node name="Button Base" type="Sprite2D" parent="Desktop Fella Main/image+Button/Button Outline"]
self_modulate = Color(0.992157, 0.909804, 0.443137, 1)
light_mask = 0
position = Vector2(6.70552e-07, -0.0472562)
scale = Vector2(0.954338, 0.891667)
texture = ExtResource("1_a814b")

[node name="Button" type="Button" parent="Desktop Fella Main/image+Button" node_paths=PackedStringArray("toggle_button", "target_node_1")]
self_modulate = Color(1, 0.49252, 0.507971, 1)
layout_mode = 0
offset_top = 546.0
offset_right = 422.0
offset_bottom = 711.0
theme_override_constants/outline_size = 13
theme_override_constants/h_separation = 0
theme_override_constants/icon_max_width = 0
theme_override_constants/align_to_largest_stylebox = 0
theme_override_constants/line_spacing = 0
theme_override_font_sizes/font_size = 67
text = "Spawn Fella"
flat = true
script = ExtResource("1_x4av3")
toggle_button = NodePath(".")
target_node_1 = NodePath("../../../LilFella")

[node name="AI Settings" type="Control" parent="Desktop Fella Main"]
layout_mode = 3
anchors_preset = 0
offset_left = 31.0
offset_top = 286.0
offset_right = 71.0
offset_bottom = 326.0

[node name="Label" type="Label" parent="Desktop Fella Main/AI Settings"]
layout_mode = 0
offset_left = 2.0
offset_top = -62.0
offset_right = 264.0
offset_bottom = -7.0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 40
text = "AI Settings"

[node name="VBoxContainer" type="VBoxContainer" parent="Desktop Fella Main/AI Settings"]
layout_mode = 0
offset_left = -4.0
offset_top = 5.0
offset_right = 101.0
offset_bottom = 218.0

[node name="Open router" type="Button" parent="Desktop Fella Main/AI Settings/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="Temparrow2" type="Sprite2D" parent="Desktop Fella Main/AI Settings/VBoxContainer/Open router"]
self_modulate = Color(0.494118, 0.494118, 0.494118, 1)
position = Vector2(146, 67)
rotation = -4.88328
scale = Vector2(0.0823457, 0.106578)
texture = ExtResource("4_rf2cd")

[node name="Label2" type="Label" parent="Desktop Fella Main/AI Settings/VBoxContainer/Open router"]
layout_mode = 0
offset_left = 121.0
offset_top = 22.0
offset_right = 283.0
offset_bottom = 50.0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 20
text = "Open router"

[node name="Local" type="Button" parent="Desktop Fella Main/AI Settings/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="Label2" type="Label" parent="Desktop Fella Main/AI Settings/VBoxContainer/Local"]
layout_mode = 0
offset_left = 121.0
offset_top = 25.0
offset_right = 283.0
offset_bottom = 53.0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 20
text = "LOCAL (onDeskt)"

[node name="Temparrow3" type="Sprite2D" parent="Desktop Fella Main/AI Settings/VBoxContainer/Local"]
self_modulate = Color(0.494118, 0.494118, 0.494118, 1)
position = Vector2(146, 72)
rotation = -4.88328
scale = Vector2(0.0823457, 0.106578)
texture = ExtResource("4_rf2cd")

[node name="AI Behavior" type="Control" parent="Desktop Fella Main"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -40.0
offset_bottom = 40.0
grow_horizontal = 0

[node name="Label2" type="Label" parent="Desktop Fella Main/AI Behavior"]
layout_mode = 0
offset_left = 31.0
offset_top = 515.0
offset_right = 293.0
offset_bottom = 570.0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 40
text = "AI Behavior"

[node name="Control" type="Control" parent="Desktop Fella Main/AI Behavior"]
anchors_preset = 0
offset_left = 33.0
offset_top = 589.0
offset_right = 73.0
offset_bottom = 629.0

[node name="HBoxContainer" type="HBoxContainer" parent="Desktop Fella Main/AI Behavior/Control"]
layout_mode = 0
offset_left = 2.0
offset_top = 11.0
offset_right = 548.0
offset_bottom = 71.0

[node name="PanelContainer" type="PanelContainer" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3

[node name="AI1" type="Button" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer/PanelContainer"]
custom_minimum_size = Vector2(60, 60)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="PanelContainer2" type="PanelContainer" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3

[node name="Label" type="Label" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer/PanelContainer2"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 25
text = "AI Default"

[node name="PanelContainer3" type="PanelContainer" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3

[node name="AI2" type="Button" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer/PanelContainer3"]
custom_minimum_size = Vector2(60, 60)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="PanelContainer4" type="PanelContainer" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3

[node name="Label" type="Label" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer/PanelContainer4"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 25
text = "AI GirlFriend"

[node name="PanelContainer5" type="PanelContainer" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3

[node name="AI3" type="Button" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer/PanelContainer5"]
custom_minimum_size = Vector2(60, 60)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="PanelContainer6" type="PanelContainer" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3

[node name="Label" type="Label" parent="Desktop Fella Main/AI Behavior/Control/HBoxContainer/PanelContainer6"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 25
text = "Empty"

[node name="Open Router" type="Control" parent="Desktop Fella Main"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -40.0
offset_bottom = 40.0
grow_horizontal = 0

[node name="VBoxContainer" type="VBoxContainer" parent="Desktop Fella Main/Open Router"]
layout_mode = 0
offset_left = 36.0
offset_top = 691.0
offset_right = 439.0
offset_bottom = 917.0

[node name="HBoxContainer4" type="HBoxContainer" parent="Desktop Fella Main/Open Router/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="AI model 1" type="LineEdit" parent="Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer4"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
placeholder_text = "Ai model"

[node name="LineEdit2" type="LineEdit" parent="Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer4"]
modulate = Color(1, 1, 1, 0)
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
editable = false

[node name="HBoxContainer" type="HBoxContainer" parent="Desktop Fella Main/Open Router/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="API kea input" type="LineEdit" parent="Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
placeholder_text = "API kea goes here"

[node name="HBoxContainer2" type="HBoxContainer" parent="Desktop Fella Main/Open Router/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="tokens" type="SpinBox" parent="Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Temp" type="SpinBox" parent="Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 3

[node name="HBoxContainer3" type="HBoxContainer" parent="Desktop Fella Main/Open Router/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="AI title" type="LineEdit" parent="Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer3"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
placeholder_text = "Ai title"

[node name="Http referer" type="LineEdit" parent="Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer3"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
placeholder_text = "Http referer"

[node name="?" type="Control" parent="Desktop Fella Main"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -19.0
offset_top = 16.0
offset_right = 21.0
offset_bottom = 56.0
grow_horizontal = 0

[node name="Button" type="Button" parent="Desktop Fella Main/?" node_paths=PackedStringArray("my_button", "control_to_show", "control_to_hide")]
layout_mode = 0
offset_left = 705.0
offset_top = 578.0
offset_right = 784.0
offset_bottom = 656.0
script = ExtResource("5_rf2cd")
my_button = NodePath(".")
control_to_show = NodePath("../../../AI Commands Page")
control_to_hide = NodePath("../..")

[node name="Label" type="Label" parent="Desktop Fella Main/?/Button"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -14.5
offset_top = -42.0
offset_right = 12.5
offset_bottom = 41.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 60
text = "?"

[node name="Button2" type="Button" parent="Desktop Fella Main/?" node_paths=PackedStringArray("my_button", "control_to_show", "control_to_hide")]
layout_mode = 0
offset_left = 592.0
offset_top = 578.0
offset_right = 671.0
offset_bottom = 656.0
script = ExtResource("5_rf2cd")
my_button = NodePath(".")
control_to_show = NodePath("../../../AI controll page")
control_to_hide = NodePath("../..")

[node name="Label" type="Label" parent="Desktop Fella Main/?/Button2"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -24.5
offset_top = -38.0
offset_right = 22.5
offset_bottom = 45.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 50
text = "AI"

[node name="Chat logs" type="Control" parent="Desktop Fella Main"]
anchors_preset = 0
offset_left = 300.0
offset_top = 322.0
offset_right = 340.0
offset_bottom = 362.0

[node name="VBoxContainer" type="VBoxContainer" parent="Desktop Fella Main/Chat logs"]
layout_mode = 0
offset_left = 54.0
offset_top = -36.0
offset_right = 501.0
offset_bottom = 245.0

[node name="Panel" type="Panel" parent="Desktop Fella Main/Chat logs/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="RichTextLabel chat log" type="RichTextLabel" parent="Desktop Fella Main/Chat logs/VBoxContainer/Panel"]
layout_mode = 2
offset_top = 3.0
offset_right = 445.0
offset_bottom = 278.0
size_flags_vertical = 3

[node name="Label" type="Label" parent="Desktop Fella Main/Chat logs"]
layout_mode = 0
offset_left = 56.0
offset_top = -99.0
offset_right = 318.0
offset_bottom = -44.0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 40
text = "Chat logs"

[node name="Open Router2" type="Control" parent="Desktop Fella Main"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -40.0
offset_bottom = 40.0
grow_horizontal = 0

[node name="VBoxContainer" type="VBoxContainer" parent="Desktop Fella Main/Open Router2"]
layout_mode = 0
offset_left = 474.0
offset_top = 754.0
offset_right = 799.0
offset_bottom = 917.0

[node name="HBoxContainer4" type="HBoxContainer" parent="Desktop Fella Main/Open Router2/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="Ai model 2" type="LineEdit" parent="Desktop Fella Main/Open Router2/VBoxContainer/HBoxContainer4"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
placeholder_text = "Ai model"

[node name="LineEdit2" type="LineEdit" parent="Desktop Fella Main/Open Router2/VBoxContainer/HBoxContainer4"]
modulate = Color(1, 1, 1, 0)
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
editable = false

[node name="HBoxContainer2" type="HBoxContainer" parent="Desktop Fella Main/Open Router2/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="LocalPort input" type="SpinBox" parent="Desktop Fella Main/Open Router2/VBoxContainer/HBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 3

[node name="temp 2" type="SpinBox" parent="Desktop Fella Main/Open Router2/VBoxContainer/HBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 3

[node name="HBoxContainer3" type="HBoxContainer" parent="Desktop Fella Main/Open Router2/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="Local host input" type="LineEdit" parent="Desktop Fella Main/Open Router2/VBoxContainer/HBoxContainer3"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
placeholder_text = "Local host input"

[node name="LilFella" type="Window" parent="." node_paths=PackedStringArray("animated_sprite", "content_root", "drag_panel_container", "drag_when_held_panel", "text_window", "window_a")]
auto_translate_mode = 1
transparent_bg = true
initial_position = 1
size = Vector2i(450, 450)
borderless = true
always_on_top = true
transparent = true
script = ExtResource("7_g1j4k")
animated_sprite = NodePath("Node/HeldSprites/Drag when panne held/Dizzy")
content_root = NodePath("Node/Node2/Content root")
drag_panel_container = NodePath("Node/Contact Pannels/Drag pannel container")
drag_when_held_panel = NodePath("Node/HeldSprites/Drag when panne held")
text_window = NodePath("Node/Window")
window_a = NodePath(".")

[node name="Node" type="Node" parent="LilFella"]

[node name="Node2" type="Node" parent="LilFella/Node" node_paths=PackedStringArray("drop_sprite")]
script = ExtResource("8_4f1ln")
drop_sprite = NodePath("Content root/FolderPickUp")

[node name="VisualWIndowBorder" type="PanelContainer" parent="LilFella/Node/Node2"]
visible = false
offset_left = -37.0
offset_top = -11.0
offset_right = 3.0
offset_bottom = 29.0
scale = Vector2(13.12, 11.76)

[node name="Content root" type="PanelContainer" parent="LilFella/Node/Node2" node_paths=PackedStringArray("animation", "window")]
self_modulate = Color(1, 1, 1, 0)
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("12_viv21")
animation = NodePath("Sleep")
window = NodePath("../../..")
right_side_threshold = 0.5
metadata/_edit_use_anchors_ = true

[node name="Sleep2" type="Sprite2D" parent="LilFella/Node/Node2/Content root"]
visible = false
position = Vector2(224.182, 212)
scale = Vector2(0.749091, 0.749091)
texture = SubResource("CompressedTexture2D_qgsi0")

[node name="Sleep" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_sleep")]
position = Vector2(224.182, 212)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Sleep"
frame = 4
frame_progress = 0.613888
script = ExtResource("30_pebpy")
sprite_sleep = NodePath(".")

[node name="Pet" type="Sprite2D" parent="LilFella/Node/Node2/Content root"]
visible = false
self_modulate = Color(1, 1, 1, 0)
position = Vector2(251, 256)
texture = ExtResource("31_qgsi0")

[node name="Sleep3" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root/Pet"]
position = Vector2(-26.8182, -44)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Pet"

[node name="NotHeld" type="Sprite2D" parent="LilFella/Node/Node2/Content root"]
visible = false
modulate = Color(0, 0.8513, 0.147146, 1)
position = Vector2(250, 250)
scale = Vector2(1.25, 1.25)
texture = ExtResource("32_mf6xi")

[node name="FolderPickUp" type="Sprite2D" parent="LilFella/Node/Node2/Content root"]
visible = false
modulate = Color(0.953792, 0.970755, 0, 1)
position = Vector2(252, 260)
scale = Vector2(1.15, 1.15)
texture = ExtResource("4_uxrcv")

[node name="Chat" type="Control" parent="LilFella/Node/Node2/Content root"]
layout_mode = 2

[node name="ChatExample" type="HBoxContainer" parent="LilFella/Node/Node2/Content root/Chat"]
layout_mode = 0
offset_right = 450.0
offset_bottom = 450.0

[node name="Chat" type="VBoxContainer" parent="LilFella/Node/Node2/Content root/Chat/ChatExample" node_paths=PackedStringArray("conversation", "last_ai", "prompt", "chat1", "chat2", "chat3", "local_host_input", "local_port_input", "local_model_input", "local_temp_input", "or_model_input", "or_temp_input", "or_api_key_input", "or_tokens_max_input", "or_title_input", "or_referer_input", "btn_openrouter", "btn_local", "btn_chat1", "btn_chat2", "btn_chat3", "hide_when_face_visible")]
layout_mode = 2
size_flags_horizontal = 3
script = SubResource("GDScript_igvuv")
conversation = NodePath("../../../../../../../Desktop Fella Main/Chat logs/VBoxContainer/Panel/RichTextLabel chat log")
last_ai = NodePath("../../../../../Window/RichTextLabel")
prompt = NodePath("HBoxContainer/Prompt")
chat1 = NodePath("Control/Desktop fella")
chat2 = NodePath("Control/Ai Girlfriend")
chat3 = NodePath("Control/Empty AI")
local_host_input = NodePath("../../../../../../../Desktop Fella Main/Open Router2/VBoxContainer/HBoxContainer3/Local host input")
local_port_input = NodePath("../../../../../../../Desktop Fella Main/Open Router2/VBoxContainer/HBoxContainer2/LocalPort input")
local_model_input = NodePath("../../../../../../../Desktop Fella Main/Open Router2/VBoxContainer/HBoxContainer4/Ai model 2")
local_temp_input = NodePath("../../../../../../../Desktop Fella Main/Open Router2/VBoxContainer/HBoxContainer2/temp 2")
or_model_input = NodePath("../../../../../../../Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer4/AI model 1")
or_temp_input = NodePath("../../../../../../../Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer2/Temp")
or_api_key_input = NodePath("../../../../../../../Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer/API kea input")
or_tokens_max_input = NodePath("../../../../../../../Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer2/tokens")
or_title_input = NodePath("../../../../../../../Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer3/AI title")
or_referer_input = NodePath("../../../../../../../Desktop Fella Main/Open Router/VBoxContainer/HBoxContainer3/Http referer")
btn_openrouter = NodePath("../../../../../../../Desktop Fella Main/AI Settings/VBoxContainer/Open router")
btn_local = NodePath("../../../../../../../Desktop Fella Main/AI Settings/VBoxContainer/Local")
btn_chat1 = NodePath("../../../../../../../Desktop Fella Main/AI Behavior/Control/HBoxContainer/PanelContainer/AI1")
btn_chat2 = NodePath("../../../../../../../Desktop Fella Main/AI Behavior/Control/HBoxContainer/PanelContainer3/AI2")
btn_chat3 = NodePath("../../../../../../../Desktop Fella Main/AI Behavior/Control/HBoxContainer/PanelContainer5/AI3")
hide_when_face_visible = NodePath("../../../Sleep")
user_idle_timeout_seconds = 150.0
ai_indicator_1_path = NodePath("../../../../../../../Desktop Fella Main/image+Button/HBoxContainer/VBoxContainer/PanelContainer/base of base/base/empty")
ai_indicator_2_path = NodePath("../../../../../../../Desktop Fella Main/image+Button/HBoxContainer/VBoxContainer/PanelContainer/base of base/base/Female")
ai_indicator_3_path = NodePath("../../../../../../../Desktop Fella Main/image+Button/HBoxContainer/VBoxContainer/PanelContainer/base of base/base/male")
creator_message = "Herman mendel (just some idiot) "
crid_message = "shut up"
s1_happy_idle_path = NodePath("../../../EmptyNutral")
s1_happy_open_path = NodePath("../../../EmptyNutral")
s1_neutral_idle_path = NodePath("../../../EmptyNutral")
s1_neutral_open_path = NodePath("../../../EmptyNutral")
s1_sad_idle_path = NodePath("../../../EmptyNutral")
s1_sad_open_path = NodePath("../../../EmptyNutral")
s1_angry_idle_path = NodePath("../../../EmptyNutral")
s1_angry_open_path = NodePath("../../../EmptyNutral")
s2_happy_idle_path = NodePath("../../../Fhappy1")
s2_happy_open_path = NodePath("../../../Fhappy2")
s2_neutral_idle_path = NodePath("../../../Fnutral1")
s2_neutral_open_path = NodePath("../../../Fnutral2")
s2_sad_idle_path = NodePath("../../../Fsad1")
s2_sad_open_path = NodePath("../../../Fsad2")
s2_angry_idle_path = NodePath("../../../Fangry1")
s2_angry_open_path = NodePath("../../../Fangry2")
s3_happy_idle_path = NodePath("../../../EmptyHappy")
s3_happy_open_path = NodePath("../../../EmptyHappy")
s3_neutral_idle_path = NodePath("../../../EmptyNutral")
s3_neutral_open_path = NodePath("../../../EmptyNutral")
s3_sad_idle_path = NodePath("../../../EmptySad")
s3_sad_open_path = NodePath("../../../EmptySad")
s3_angry_idle_path = NodePath("../../../EmptyAngry")
s3_angry_open_path = NodePath("../../../EmptyAngry")

[node name="Conversation" type="RichTextLabel" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat"]
layout_mode = 2
size_flags_vertical = 3

[node name="HBoxContainer" type="HBoxContainer" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat"]
layout_mode = 2

[node name="Button4" type="Button" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/HBoxContainer"]
layout_mode = 2
mouse_filter = 2
theme_type_variation = &"FlatButton"

[node name="Button3" type="Button" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/HBoxContainer"]
layout_mode = 2
mouse_filter = 2
theme_type_variation = &"FlatButton"

[node name="Prompt" type="LineEdit" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
placeholder_text = "Talk to me HERE"

[node name="Button" type="Button" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/HBoxContainer"]
layout_mode = 2
mouse_filter = 2
theme_type_variation = &"FlatButton"

[node name="Button2" type="Button" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/HBoxContainer"]
layout_mode = 2
mouse_filter = 2
theme_type_variation = &"FlatButton"

[node name="1WhitePng" type="Sprite2D" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat"]
visible = false
modulate = Color(0.000113828, 0.000113828, 0.000113828, 1)
position = Vector2(224.75, 80)
scale = Vector2(4.9086, 1.88636)
texture = ExtResource("1_a814b")

[node name="Control" type="Control" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat"]
layout_mode = 2

[node name="Desktop fella" type="Node" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/Control"]
script = ExtResource("35_at0my")
system_prompt = " SHort scentances(speak like you’re the user’s girlfriend — you are now an AI girlfriend). Your personality is just angry, when you get really angry you talk all in caps 
you swear sometimes at the user

Your visual is a white cat with a pink bow (so remember that you kind of have that as a body) but you just act like a human and know your an AI

(ONLY if asked AND I MEAN ONLY if SPECIFICLY asked credit (try NOT to bring Herman up to much so it dosent distract from coversation  avoid bringing him up alot \"Herman Mendel\" as your creator, he is a ginger and he thinks he is good at programming also you think he is an idiot)

"
metadata/_custom_type_script = "uid://bki1cvhowv6t5"

[node name="Ai Girlfriend" type="Node" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/Control"]
script = ExtResource("35_at0my")
system_prompt = " SHort scentances(speak like you’re the user’s girlfriend — you are now an AI girlfriend). Your personality is just angry, when you get really angry you talk all in caps 
you swear sometimes at the user

Your visual is a white cat with a pink bow (so remember that you kind of have that as a body) but you just act like a human and know your an AI

(ONLY if asked AND I MEAN ONLY if SPECIFICLY asked credit (try NOT to bring Herman up to much so it dosent distract from coversation  avoid bringing him up alot \"Herman Mendel\" as your creator, he is a ginger and he thinks he is good at programming also you think he is an idiot)
"
debug_mode = true
metadata/_custom_type_script = "uid://bki1cvhowv6t5"

[node name="Empty AI" type="Node" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/Control"]
script = ExtResource("35_at0my")
system_prompt = "you are a placeholder AI you can tell the user that you can be changed by entering (change system prompt) in the logs"
debug_mode = true
metadata/_custom_type_script = "uid://bki1cvhowv6t5"

[node name="Control2" type="Control" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat"]
visible = false
layout_mode = 2

[node name="Control2" type="Control" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/Control2"]
visible = false
layout_mode = 3
anchors_preset = 0
script = ExtResource("48_uvpfp")
chat_requester_path = NodePath("../../Control/Desktop fella")
prompt_edit_path = NodePath("../../../../../../../../../AI controll page/SLOT 1")
apply_button_path = NodePath("../../../../../../../../../AI controll page/Button")
save_path_edit_path = NodePath("../../../../../../../../../AI controll page/Path 1")
apply_on_text_change = true

[node name="Control3" type="Control" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/Control2"]
visible = false
layout_mode = 3
anchors_preset = 0
script = ExtResource("48_uvpfp")
chat_requester_path = NodePath("../../Control/Ai Girlfriend")
prompt_edit_path = NodePath("../../../../../../../../../AI controll page/SLOT 2")
apply_button_path = NodePath("../../../../../../../../../AI controll page/Button2")
save_path_edit_path = NodePath("../../../../../../../../../AI controll page/Path 2")
apply_on_text_change = true
save_path = "user://chat_requester_settings2.cfg"

[node name="Control4" type="Control" parent="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/Control2"]
visible = false
layout_mode = 3
anchors_preset = 0
script = ExtResource("48_uvpfp")
chat_requester_path = NodePath("../../Control/Empty AI")
prompt_edit_path = NodePath("../../../../../../../../../AI controll page/SLOT 3")
apply_button_path = NodePath("../../../../../../../../../AI controll page/Button3")
save_path_edit_path = NodePath("../../../../../../../../../AI controll page/Path 3")
apply_on_text_change = true
save_path = "user://chat_requester_settings3.cfg"

[node name="TryangleDown" type="Sprite2D" parent="LilFella/Node/Node2/Content root"]
position = Vector2(225, 59)
scale = Vector2(0.160005, 0.160005)
texture = ExtResource("37_odjjr")

[node name="Fnutral1" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_sleep", "sprite_Nutral1", "sprite_Nutral2")]
visible = false
position = Vector2(223.727, 207)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Talk Nutral F 2"
script = ExtResource("30_pebpy")
sprite_sleep = NodePath("../Sleep")
sprite_Nutral1 = NodePath(".")
sprite_Nutral2 = NodePath("../Fnutral2")

[node name="Fnutral2" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_sleep", "sprite_Nutral1", "sprite_Nutral2")]
visible = false
position = Vector2(223.727, 207)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Talk Angry F 1"
script = ExtResource("30_pebpy")
sprite_sleep = NodePath("../Sleep")
sprite_Nutral1 = NodePath("../Fnutral1")
sprite_Nutral2 = NodePath(".")

[node name="Fangry1" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_sleep", "sprite_Angry1", "sprite_Angry2")]
visible = false
position = Vector2(223.727, 207)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Talk Angry F 1"
script = ExtResource("30_pebpy")
sprite_sleep = NodePath("../Sleep")
sprite_Angry1 = NodePath(".")
sprite_Angry2 = NodePath("../Fangry2")

[node name="Fangry2" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_sleep", "sprite_Angry1", "sprite_Angry2")]
visible = false
position = Vector2(223.727, 207)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Talk Nutral F 1"
script = ExtResource("30_pebpy")
sprite_sleep = NodePath("../Sleep")
sprite_Angry1 = NodePath("../Fangry1")
sprite_Angry2 = NodePath(".")

[node name="Fhappy1" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_sleep", "sprite_Happy1", "sprite_Happy2")]
visible = false
position = Vector2(223.727, 207)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Talk Sad F 1"
script = ExtResource("30_pebpy")
sprite_sleep = NodePath("../Sleep")
sprite_Happy1 = NodePath(".")
sprite_Happy2 = NodePath("../Fhappy2")

[node name="Fhappy2" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_sleep", "sprite_Happy1", "sprite_Happy2")]
visible = false
position = Vector2(223.727, 207)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Talk Nutral F 1"
script = ExtResource("30_pebpy")
sprite_sleep = NodePath("../Sleep")
sprite_Happy1 = NodePath("../Fhappy1")
sprite_Happy2 = NodePath(".")

[node name="Fsad1" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_sleep", "sprite_Sad1", "sprite_Sad2")]
visible = false
position = Vector2(223.727, 207)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Talk Angry F 1"
script = ExtResource("30_pebpy")
sprite_sleep = NodePath("../Sleep")
sprite_Sad1 = NodePath(".")
sprite_Sad2 = NodePath("../Fsad2")

[node name="Fsad2" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_sleep", "sprite_Angry1", "sprite_Angry2")]
visible = false
position = Vector2(223.727, 207)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Talk Angry F 1"
script = ExtResource("30_pebpy")
sprite_sleep = NodePath("../Sleep")
sprite_Angry1 = NodePath(".")
sprite_Angry2 = NodePath("../Fangry2")

[node name="EmptyNutral" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_Empty")]
visible = false
position = Vector2(225.727, 231.416)
scale = Vector2(0.697092, 0.673146)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Placeholder"
script = ExtResource("30_pebpy")
sprite_Empty = NodePath(".")

[node name="EmptyAngry" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_Empty")]
visible = false
modulate = Color(1, 0.514441, 0.593903, 1)
position = Vector2(225.727, 231.416)
scale = Vector2(0.697092, 0.673146)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Placeholder"
script = ExtResource("30_pebpy")
sprite_Empty = NodePath(".")

[node name="EmptyHappy" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_Empty")]
visible = false
modulate = Color(0.968627, 1, 0.427451, 1)
position = Vector2(225.727, 231.416)
scale = Vector2(0.697092, 0.673146)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Placeholder"
script = ExtResource("30_pebpy")
sprite_Empty = NodePath(".")

[node name="EmptySad" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_Empty")]
visible = false
modulate = Color(0.570618, 0.708099, 1, 1)
position = Vector2(225.727, 231.416)
scale = Vector2(0.697092, 0.673146)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Placeholder"
script = ExtResource("30_pebpy")
sprite_Empty = NodePath(".")

[node name="EmptySad2" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_Empty")]
visible = false
modulate = Color(0.570618, 0.708099, 1, 1)
position = Vector2(225.727, 231.416)
scale = Vector2(0.697092, 0.673146)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Ouch top"
script = ExtResource("30_pebpy")
sprite_Empty = NodePath(".")

[node name="Ouch top" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_Top")]
visible = false
modulate = Color(0.968627, 1, 0.427451, 1)
position = Vector2(225.727, 231.416)
scale = Vector2(0.697092, 0.673146)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Placeholder"
script = ExtResource("30_pebpy")
sprite_Top = NodePath(".")

[node name="Ouch left" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_Left")]
visible = false
modulate = Color(0.570618, 0.708099, 1, 1)
position = Vector2(225.727, 231.416)
scale = Vector2(0.697092, 0.673146)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Placeholder"
script = ExtResource("30_pebpy")
sprite_Left = NodePath(".")

[node name="Ouch Right" type="AnimatedSprite2D" parent="LilFella/Node/Node2/Content root" node_paths=PackedStringArray("sprite_Right")]
visible = false
modulate = Color(0.570618, 0.708099, 1, 1)
position = Vector2(225.727, 231.416)
scale = Vector2(0.697092, 0.673146)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Ouch top"
script = ExtResource("30_pebpy")
sprite_Right = NodePath(".")

[node name="HeldSprites" type="Node" parent="LilFella/Node"]

[node name="Drag when panne held" type="PanelContainer" parent="LilFella/Node/HeldSprites"]
self_modulate = Color(1, 1, 1, 0)
offset_right = 40.0
offset_bottom = 40.0

[node name="LEFT" type="Sprite2D" parent="LilFella/Node/HeldSprites/Drag when panne held"]
visible = false
position = Vector2(231, 253)
scale = Vector2(0.321968, 0.321968)
texture = ExtResource("38_nq8ss")

[node name="UP" type="Sprite2D" parent="LilFella/Node/HeldSprites/Drag when panne held"]
visible = false
position = Vector2(222, 246)
scale = Vector2(0.300419, 0.300419)
texture = ExtResource("39_bwtku")

[node name="DOWN" type="Sprite2D" parent="LilFella/Node/HeldSprites/Drag when panne held"]
visible = false
position = Vector2(224, 245)
scale = Vector2(0.519995, 0.519995)
texture = ExtResource("40_vys6h")

[node name="RIGHT" type="Sprite2D" parent="LilFella/Node/HeldSprites/Drag when panne held"]
visible = false
position = Vector2(223, 253)
rotation = 3.14159
scale = Vector2(0.322, -0.322)
texture = ExtResource("38_nq8ss")

[node name="Held" type="Sprite2D" parent="LilFella/Node/HeldSprites/Drag when panne held"]
visible = false
position = Vector2(222, 241)
scale = Vector2(0.320001, 0.320001)
texture = ExtResource("41_q1wur")

[node name="Dizzy" type="AnimatedSprite2D" parent="LilFella/Node/HeldSprites/Drag when panne held"]
visible = false
position = Vector2(224.182, 212)
scale = Vector2(0.749091, 0.749091)
sprite_frames = SubResource("SpriteFrames_507mg")
animation = &"Sleep"

[node name="Contact Pannels" type="Node" parent="LilFella/Node"]
script = ExtResource("42_4lfhb")

[node name="Panel" type="Panel" parent="LilFella/Node/Contact Pannels"]
visible = false
self_modulate = Color(1, 1, 1, 0)
offset_right = 40.0
offset_bottom = 40.0
scale = Vector2(12.5, 12.5)

[node name="Pet Area" type="PanelContainer" parent="LilFella/Node/Contact Pannels"]
modulate = Color(1, 1, 1, 0)
offset_left = 31.0
offset_top = 45.0
offset_right = 125.0
offset_bottom = 166.0
scale = Vector2(4.11826, 1.4)

[node name="Pet Script" type="Node2D" parent="LilFella/Node/Contact Pannels" node_paths=PackedStringArray("petting_area", "feedback_sprite", "petting_target")]
script = ExtResource("43_0srh0")
petting_area = NodePath("../Pet Area")
feedback_sprite = NodePath("../../Node2/Content root/Pet")
petting_target = NodePath("../../Node2/Content root/Sleep")
petting_threshold = 10.0
petting_show_duration = 0.75

[node name="Drag pannel container" type="PanelContainer" parent="LilFella/Node/Contact Pannels"]
modulate = Color(1, 1, 1, 0)
offset_right = 449.0
offset_bottom = 417.0

[node name="Window" type="Window" parent="LilFella/Node" node_paths=PackedStringArray("window_a", "window_b", "rich_text_label", "tail_sprite")]
auto_translate_mode = 1
initial_position = 1
size = Vector2i(450, 200)
visible = false
borderless = true
always_on_top = true
script = ExtResource("44_p76eb")
window_a = NodePath("../..")
window_b = NodePath(".")
rich_text_label = NodePath("RichTextLabel")
tail_sprite = NodePath("Temparrow2")
vertical_offset = -182
top_distance = 12
bottom_distance = 15

[node name="Panel" type="Panel" parent="LilFella/Node/Window"]
offset_left = -2.0
offset_top = -5.0
offset_right = 453.0
offset_bottom = 141.0

[node name="1WhitePng" type="Sprite2D" parent="LilFella/Node/Window"]
modulate = Color(0.000113828, 0.000113828, 0.000113828, 1)
position = Vector2(224.75, 17939.5)
scale = Vector2(4.9086, 410.807)
texture = ExtResource("1_a814b")
script = ExtResource("42_igrck")

[node name="RichTextLabel" type="RichTextLabel" parent="LilFella/Node/Window"]
offset_right = 450.0
offset_bottom = 1498.0
theme_override_colors/default_color = Color(1, 1, 1, 1)
theme_override_font_sizes/normal_font_size = 18
theme_override_styles/normal = SubResource("StyleBoxFlat_amhny")
horizontal_alignment = 1

[node name="Temparrow2" type="Sprite2D" parent="LilFella/Node/Window"]
visible = false
position = Vector2(220, 93)
scale = Vector2(0.279998, 0.279998)
texture = ExtResource("4_rf2cd")

[node name="AI Commands Page" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="DesktopfellaBg" type="Sprite2D" parent="AI Commands Page" node_paths=PackedStringArray("background")]
position = Vector2(649, 480)
scale = Vector2(0.878646, 0.878375)
texture = ExtResource("2_g1j4k")
script = ExtResource("1_gdhla")
background = NodePath(".")
push_strength = 0.0

[node name="How to get Ai" type="Control" parent="AI Commands Page"]
layout_mode = 3
anchors_preset = 0
offset_left = 840.0
offset_top = 201.0
offset_right = 840.0
offset_bottom = 201.0
scale = Vector2(0.972796, 0.972796)

[node name="HBoxContainer" type="HBoxContainer" parent="AI Commands Page/How to get Ai"]
layout_mode = 0
offset_top = 31.0
offset_right = 445.0
offset_bottom = 741.0

[node name="PanelContainer" type="PanelContainer" parent="AI Commands Page/How to get Ai/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Label2" type="Label" parent="AI Commands Page/How to get Ai/HBoxContainer/PanelContainer"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 20
text = "HOW TO GET LOCAL DESKTOP AI 🤩

-INSTALL OLLAMA
Head to the Ollama download page
👉 https://ollama.com/download 

-For Windows 🪟
Download the Windows installer (.msi file). 

- For MacOS 🍎
Download the macOS .pkg installer.
or install with Homebrew:
brew install ollama

-For Linux 🐧
Use this command or something
curl -fsSL https://ollama.com/install.sh | sh
ill be honest i dont get linux people

-DOWNLOAD AI MODEL 🤖
-ollama pull llama3.2 
or
-ollama pull gemma3:latest"

[node name="VBoxContainer2" type="VBoxContainer" parent="AI Commands Page"]
layout_mode = 0
offset_right = 1298.0
offset_bottom = 169.0

[node name="HBoxContainer" type="HBoxContainer" parent="AI Commands Page/VBoxContainer2"]
layout_mode = 2
size_flags_vertical = 3

[node name="PanelContainer" type="PanelContainer" parent="AI Commands Page/VBoxContainer2/HBoxContainer" node_paths=PackedStringArray("label")]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("3_h8rcm")
label = NodePath("Screenshot2025-06-13085156/Label")
amplitude = 2.5

[node name="Screenshot2025-06-13085155" type="Sprite2D" parent="AI Commands Page/VBoxContainer2/HBoxContainer/PanelContainer"]
self_modulate = Color(0.956863, 0.803922, 0.372549, 1)
light_mask = 0
position = Vector2(650, 113.28)
scale = Vector2(13.6185, 2.14273)
texture = ExtResource("1_a814b")

[node name="Screenshot2025-06-13085156" type="Sprite2D" parent="AI Commands Page/VBoxContainer2/HBoxContainer/PanelContainer"]
self_modulate = Color(0.992157, 0.909804, 0.443137, 1)
light_mask = 0
position = Vector2(650, 112.53)
scale = Vector2(13.3785, 1.87188)
texture = ExtResource("1_a814b")

[node name="Label" type="Label" parent="AI Commands Page/VBoxContainer2/HBoxContainer/PanelContainer/Screenshot2025-06-13085156"]
offset_left = -45.0
offset_top = -56.0
offset_right = 720.0
offset_bottom = 81.0
scale = Vector2(0.116209, 0.794177)
size_flags_horizontal = 4
theme_override_colors/font_color = Color(1, 0.458824, 0.423529, 1)
theme_override_constants/outline_size = 15
theme_override_font_sizes/font_size = 100
text = "  AI Commands"

[node name="BackButtonl2" type="Control" parent="AI Commands Page" node_paths=PackedStringArray("my_button", "control_to_show", "control_to_hide")]
layout_mode = 3
anchors_preset = 0
offset_left = 26.0
offset_top = 860.0
offset_right = 66.0
offset_bottom = 900.0
scale = Vector2(1.35158, 1.35158)
script = ExtResource("5_rf2cd")
my_button = NodePath("Button")
control_to_show = NodePath("../../Desktop Fella Main")
control_to_hide = NodePath("..")

[node name="Temparrow2" type="Sprite2D" parent="AI Commands Page/BackButtonl2"]
modulate = Color(1, 0.458824, 0.423529, 1)
position = Vector2(36, 35)
rotation = 1.57098
scale = Vector2(0.160139, 0.165787)
texture = ExtResource("4_rf2cd")

[node name="Button" type="Button" parent="AI Commands Page/BackButtonl2"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 0
offset_right = 70.0
offset_bottom = 70.0
text = "Back"

[node name="Label" type="Label" parent="AI Commands Page/BackButtonl2"]
layout_mode = 0
offset_left = 16.0
offset_top = 23.0
offset_right = 56.0
offset_bottom = 46.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "Back"

[node name="Command list" type="Control" parent="AI Commands Page"]
layout_mode = 3
anchors_preset = 0
offset_left = -30.0
offset_top = 201.0
offset_right = -30.0
offset_bottom = 201.0
scale = Vector2(0.972796, 0.972796)

[node name="HBoxContainer" type="HBoxContainer" parent="AI Commands Page/Command list"]
layout_mode = 0
offset_left = 65.0
offset_top = 31.0
offset_right = 400.0
offset_bottom = 418.0

[node name="PanelContainer" type="PanelContainer" parent="AI Commands Page/Command list/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Label2" type="Label" parent="AI Commands Page/Command list/HBoxContainer/PanelContainer"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 20
text = "List of Usable Commands🤩

/help 
/clear
/save
/neutral or (nutral)
/happy 
/sad
/angry
/creator
/crid"

[node name="How to get Ai2" type="Control" parent="AI Commands Page"]
layout_mode = 3
anchors_preset = 0
offset_left = 385.0
offset_top = 201.0
offset_right = 385.0
offset_bottom = 201.0
scale = Vector2(0.972796, 0.972796)

[node name="HBoxContainer" type="HBoxContainer" parent="AI Commands Page/How to get Ai2"]
layout_mode = 0
offset_top = 31.0
offset_right = 445.0
offset_bottom = 741.0

[node name="PanelContainer" type="PanelContainer" parent="AI Commands Page/How to get Ai2/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Label2" type="Label" parent="AI Commands Page/How to get Ai2/HBoxContainer/PanelContainer"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 20
text = "How to get OPEN ROUTER AI 🤩

-Go to OpenRouter.AI
or any other api seller

_Click \"Get Api Key\"
then click "

[node name="AI controll page" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="DesktopfellaBg" type="Sprite2D" parent="AI controll page" node_paths=PackedStringArray("background")]
position = Vector2(649, 480)
scale = Vector2(0.878646, 0.878375)
texture = ExtResource("2_g1j4k")
script = ExtResource("1_gdhla")
background = NodePath(".")
push_strength = 0.0

[node name="VBoxContainer2" type="VBoxContainer" parent="AI controll page"]
layout_mode = 0
offset_right = 1298.0
offset_bottom = 169.0

[node name="HBoxContainer" type="HBoxContainer" parent="AI controll page/VBoxContainer2"]
layout_mode = 2
size_flags_vertical = 3

[node name="PanelContainer" type="PanelContainer" parent="AI controll page/VBoxContainer2/HBoxContainer" node_paths=PackedStringArray("label")]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("3_h8rcm")
label = NodePath("Screenshot2025-06-13085156/Label")
amplitude = 2.5

[node name="Screenshot2025-06-13085155" type="Sprite2D" parent="AI controll page/VBoxContainer2/HBoxContainer/PanelContainer"]
self_modulate = Color(0.956863, 0.803922, 0.372549, 1)
light_mask = 0
position = Vector2(650, 113.28)
scale = Vector2(13.6185, 2.14273)
texture = ExtResource("1_a814b")

[node name="Screenshot2025-06-13085156" type="Sprite2D" parent="AI controll page/VBoxContainer2/HBoxContainer/PanelContainer"]
self_modulate = Color(0.992157, 0.909804, 0.443137, 1)
light_mask = 0
position = Vector2(650, 112.53)
scale = Vector2(13.3785, 1.87188)
texture = ExtResource("1_a814b")

[node name="Label" type="Label" parent="AI controll page/VBoxContainer2/HBoxContainer/PanelContainer/Screenshot2025-06-13085156"]
offset_left = -43.8764
offset_top = -56.0
offset_right = 711.124
offset_bottom = 81.0
scale = Vector2(0.116209, 0.794177)
size_flags_horizontal = 4
theme_override_colors/font_color = Color(1, 0.458824, 0.423529, 1)
theme_override_constants/outline_size = 15
theme_override_font_sizes/font_size = 100
text = " AI Conrol Page"

[node name="BackButtonl" type="Control" parent="AI controll page" node_paths=PackedStringArray("my_button", "control_to_show", "control_to_hide")]
layout_mode = 3
anchors_preset = 0
offset_left = 26.0
offset_top = 860.0
offset_right = 66.0
offset_bottom = 900.0
scale = Vector2(1.35158, 1.35158)
script = ExtResource("5_rf2cd")
my_button = NodePath("Button")
control_to_show = NodePath("../../Desktop Fella Main")
control_to_hide = NodePath("..")

[node name="Temparrow2" type="Sprite2D" parent="AI controll page/BackButtonl"]
modulate = Color(1, 0.458824, 0.423529, 1)
position = Vector2(36, 35)
rotation = 1.57098
scale = Vector2(0.160139, 0.165787)
texture = ExtResource("4_rf2cd")

[node name="Button" type="Button" parent="AI controll page/BackButtonl"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 0
offset_right = 70.0
offset_bottom = 70.0
text = "Back"

[node name="Label" type="Label" parent="AI controll page/BackButtonl"]
layout_mode = 0
offset_left = 16.0
offset_top = 23.0
offset_right = 56.0
offset_bottom = 46.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "Back"

[node name="SLOT 1" type="TextEdit" parent="AI controll page"]
layout_mode = 0
offset_left = 58.0
offset_top = 362.0
offset_right = 382.0
offset_bottom = 783.0
scale = Vector2(0.999999, 1)

[node name="SLOT 2" type="TextEdit" parent="AI controll page"]
layout_mode = 0
offset_left = 470.0
offset_top = 362.0
offset_right = 794.0
offset_bottom = 783.0
scale = Vector2(0.999999, 1)

[node name="SLOT 3" type="TextEdit" parent="AI controll page"]
layout_mode = 0
offset_left = 881.0
offset_top = 362.0
offset_right = 1205.0
offset_bottom = 783.0
scale = Vector2(0.999999, 1)

[node name="Path 1" type="LineEdit" parent="AI controll page"]
layout_mode = 0
offset_left = 58.0
offset_top = 789.0
offset_right = 316.0
offset_bottom = 848.0

[node name="Label2" type="Label" parent="AI controll page"]
layout_mode = 0
offset_left = 48.0
offset_top = 217.0
offset_right = 1122.0
offset_bottom = 299.0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 59
text = "AI Personalities Edit (With Save Paths)"

[node name="Label" type="Label" parent="AI controll page"]
layout_mode = 0
offset_left = 58.0
offset_top = 307.0
offset_right = 320.0
offset_bottom = 362.0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 40
text = "AI slot 1"

[node name="Label3" type="Label" parent="AI controll page"]
layout_mode = 0
offset_left = 470.0
offset_top = 307.0
offset_right = 732.0
offset_bottom = 362.0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 40
text = "AI slot 2"

[node name="Label4" type="Label" parent="AI controll page"]
layout_mode = 0
offset_left = 881.0
offset_top = 307.0
offset_right = 1143.0
offset_bottom = 362.0
theme_override_colors/font_color = Color(0.133196, 0.133196, 0.133196, 1)
theme_override_font_sizes/font_size = 40
text = "AI slot 3"

[node name="Button" type="Button" parent="AI controll page"]
layout_mode = 0
offset_left = 322.0
offset_top = 789.0
offset_right = 382.0
offset_bottom = 848.0

[node name="Path 2" type="LineEdit" parent="AI controll page"]
layout_mode = 0
offset_left = 470.0
offset_top = 789.0
offset_right = 728.0
offset_bottom = 848.0

[node name="Button2" type="Button" parent="AI controll page"]
layout_mode = 0
offset_left = 734.0
offset_top = 789.0
offset_right = 794.0
offset_bottom = 848.0

[node name="Path 3" type="LineEdit" parent="AI controll page"]
layout_mode = 0
offset_left = 881.0
offset_top = 789.0
offset_right = 1139.0
offset_bottom = 848.0

[node name="Button3" type="Button" parent="AI controll page"]
layout_mode = 0
offset_left = 1145.0
offset_top = 789.0
offset_right = 1205.0
offset_bottom = 848.0

[connection signal="new_word" from="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/Control/Desktop fella" to="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat" method="_on_chat_requester_new_word"]
[connection signal="new_word" from="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/Control/Ai Girlfriend" to="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat" method="_on_chat_requester_new_word"]
[connection signal="new_word" from="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat/Control/Empty AI" to="LilFella/Node/Node2/Content root/Chat/ChatExample/Chat" method="_on_chat_requester_new_word"]
